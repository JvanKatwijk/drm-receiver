######################################################################
# Automatically generated by qmake (2.01a) Wed Jun 19 18:47:11 2013
######################################################################
TEMPLATE = app
QT	+= widgets xml
CONFIG	-= console
TARGET	= drm-receiver
QMAKE_CFLAGS	+= -flto -ffast-math 
QMAKE_CXXFLAGS	+= -flto -ffast-math 
QMAKE_LFLAGS	+= -flto
QMAKE_CFLAGS	+= -g
QMAKE_CXXFLAGS	+= -g
QMAKE_LFLAGS	+= -g
#QMAKE_CXXFLAGS	+= -fsanitize=address
#QMAKE_CFLAGS	+= -fsanitize=address
#QMAKE_LFLAGS	+= -fsanitize=address
RC_ICONS	=  drm.ico
RESOURCES       += resources.qrc

DEPENDPATH += .  \
	      filters \
	      various \
	      output \
	      scopes-qwt6 \
	      devices \
	      devices/filereader \
	      drm-decoder \
	      drm-decoder/data \
	      drm-decoder/fac \
	      drm-decoder/equalizer \
	      drm-decoder/msc \
	      drm-decoder/ofdm \
	      drm-decoder/parameters \
	      drm-decoder/sdc \
	      drm-decoder/support 

INCLUDEPATH += .  \
	      filters \
	      various \
	      output \
	      scopes-qwt6 \
	      devices \
	      devices/filereader \
	      drm-decoder \
	      drm-decoder/data \
	      drm-decoder/fac \
	      drm-decoder/equalizer \
	      drm-decoder/msc \
	      drm-decoder/ofdm \
	      drm-decoder/parameters \
	      drm-decoder/sdc \
	      drm-decoder/support 

#CONFIG += static

# Input
HEADERS += ./radio-constants.h \
	   ./radio.h \
	   ./bandplan.h \
           ./output/upconverter.h \
	   ./output/audiosink.h \
           ./various/ringbuffer.h \
           ./various/fft.h \
	   ./various/shifter.h \
#	   ./various/utilities.h \
	   ./various/slidingfft.h \
	   ./various/program-list.h \
	   ./various/popup-keypad.h \
	   ./various/downconverter.h \
           ./filters/fft-filters.h \
           ./filters/fir-filters.h \
           ./filters/iir-filters.h \
	   ./filters/decimating_filter.h \
	   ./scopes-qwt6/virtual-scope.h \
	   ./scopes-qwt6/spectrogramdata.h \
	   ./scopes-qwt6/waterfall-scope.h \
	   ./scopes-qwt6/spectrum-scope.h \
           ./scopes-qwt6/scope.h \
           ./scopes-qwt6/fft-scope.h \
	   ./devices/device-handler.h \
           ./devices/filereader/filereader.h \
           ./devices/filereader/filehulp.h \
	   ./drm-decoder/drm-decoder.h \
	   ./drm-decoder/decimator-25.h \
	   ./drm-decoder/decimator.h \
	   ./drm-decoder/drm-bandfilter.h \
	   ./drm-decoder/eqdisplay.h \
	   ./drm-decoder/iqdisplay.h \
#	   ./drm-decoder/lowpassfilter.h \
	   ./drm-decoder/basics.h \
	   ./drm-decoder/utilities.h \
#	   ./drm-decoder/data/neaacdec.h \
#	   ./drm-decoder/data/aac-processor-faad.h \
	   ./drm-decoder/data/data-processor.h \
	   ./drm-decoder/data/message-processor.h \
#	   ./drm-decoder/data/up-filter.h \
	   ./drm-decoder/fac/fac-tables.h \
	   ./drm-decoder/fac/fac-processor.h \
	   ./drm-decoder/sdc/sdc-include.h \
	   ./drm-decoder/sdc/sdc-processor.h \
	   ./drm-decoder/sdc/sdc-streamer.h \
	   ./drm-decoder/msc/backend-controller.h \
	   ./drm-decoder/msc/msc-handler.h \
	   ./drm-decoder/msc/msc-handler-qam16.h \
	   ./drm-decoder/msc/msc-handler-qam64.h \
	   ./drm-decoder/msc/msc-processor.h \
	   ./drm-decoder/msc/msc-streamer.h \
	   ./drm-decoder/ofdm/correlator.h \
	   ./drm-decoder/ofdm/freqsyncer.h \
	   ./drm-decoder/ofdm/reader.h \
	   ./drm-decoder/ofdm/timesync.h \
	   ./drm-decoder/ofdm/word-collector.h \
	   ./drm-decoder/equalizer/equalizer-1.h \
	   ./drm-decoder/equalizer/equalizer-base.h \
	   ./drm-decoder/equalizer/estimator-1.h \
	   ./drm-decoder/equalizer/matrix2.h \
	   ./drm-decoder/equalizer/referenceframe.h \
	   ./drm-decoder/parameters/msc-config.h \
	   ./drm-decoder/parameters/puncture-tables.h \
	   ./drm-decoder/parameters/state-descriptor.h \
	   ./drm-decoder/support/checkcrc.h \
	   ./drm-decoder/support/deinterleaver.h \
	   ./drm-decoder/support/drm-shifter.h \
	   ./drm-decoder/support/fft-complex.h \
	   ./drm-decoder/support/mapper.h \
	   ./drm-decoder/support/mer16-values.h \
	   ./drm-decoder/support/mer4-values.h \
	   ./drm-decoder/support/mer64-values.h \
	   ./drm-decoder/support/my-array.h \
	   ./drm-decoder/support/prbs.h \
	   ./drm-decoder/support/protlevels.h \
	   ./drm-decoder/support/qam16-metrics.h \
	   ./drm-decoder/support/qam4-metrics.h \
	   ./drm-decoder/support/qam64-metrics.h \
	   ./drm-decoder/support/viterbi-drm.h 

FORMS	+= ./newradio.ui \
	   ./devices/filereader/filereader-widget.ui
FORMS	+= ./drm-decoder/drmdecoder.ui

SOURCES += ./main.cpp \
	   ./radio.cpp \
	   ./bandplan.cpp \
	   ./output/upconverter.cpp \
           ./output/audiosink.cpp \
           ./various/fft.cpp \
	   ./various/popup-keypad.cpp \
           ./various/shifter.cpp \
#	   ./various/utilities.cpp \
	   ./various/slidingfft.cpp \
	   ./various/program-list.cpp \
	   ./various/downconverter.cpp \
           ./filters/fft-filters.cpp \
           ./filters/fir-filters.cpp \
           ./filters/iir-filters.cpp \
	   ./filters/decimating_filter.cpp \
	   ./scopes-qwt6/virtual-scope.cpp \
	   ./scopes-qwt6/waterfall-scope.cpp \
	   ./scopes-qwt6/spectrum-scope.cpp \
           ./scopes-qwt6/scope.cpp \
           ./scopes-qwt6/fft-scope.cpp \
	   ./devices/device-handler.cpp \
           ./devices/filereader/filereader.cpp \
           ./devices/filereader/filehulp.cpp \
	   ./drm-decoder/drm-decoder.cpp \
	   ./drm-decoder/decimator-25.cpp \
	   ./drm-decoder/decimator.cpp \
	   ./drm-decoder/drm-bandfilter.cpp \
	   ./drm-decoder/eqdisplay.cpp \
	   ./drm-decoder/iqdisplay.cpp \
#	   ./drm-decoder/lowpassfilter.cpp \
	   ./drm-decoder/utilities.cpp \
	   ./drm-decoder/basics.cpp \
#	   ./drm-decoder/data/aac-processor-faad.cpp \
	   ./drm-decoder/data/data-processor.cpp \
	   ./drm-decoder/data/message-processor.cpp \
#	   ./drm-decoder/data/lowpassfir.cpp \
	   ./drm-decoder/data/up-filter.cpp \
	   ./drm-decoder/fac/fac-tables.cpp \
	   ./drm-decoder/fac/fac-processor.cpp \
	   ./drm-decoder/sdc/sdc-processor.cpp \
	   ./drm-decoder/sdc/sdc-streamer.cpp \
	   ./drm-decoder/msc/backend-controller.cpp \
	   ./drm-decoder/msc/msc-handler.cpp \
	   ./drm-decoder/msc/msc-handler-qam16.cpp \
	   ./drm-decoder/msc/msc-handler-qam64.cpp \
	   ./drm-decoder/msc/msc-processor.cpp \
	   ./drm-decoder/msc/msc-streamer.cpp \
	   ./drm-decoder/ofdm/correlator.cpp \
	   ./drm-decoder/ofdm/freqsyncer.cpp \
	   ./drm-decoder/ofdm/reader.cpp \
	   ./drm-decoder/ofdm/timesync.cpp \
	   ./drm-decoder/ofdm/word-collector.cpp \
	   ./drm-decoder/equalizer/equalizer-1.cpp \
	   ./drm-decoder/equalizer/equalizer-base.cpp \
	   ./drm-decoder/equalizer/estimator-1.cpp \
	   ./drm-decoder/equalizer/matrix2.cpp \
	   ./drm-decoder/equalizer/referenceframe.cpp \
	   ./drm-decoder/parameters/msc-config.cpp \
	   ./drm-decoder/parameters/puncture-tables.cpp \
	   ./drm-decoder/parameters/state-descriptor.cpp \
	   ./drm-decoder/support/checkcrc.cpp \
	   ./drm-decoder/support/deinterleaver.cpp \
	   ./drm-decoder/support/drm-shifter.cpp \
	   ./drm-decoder/support/fft-complex.cpp \
	   ./drm-decoder/support/mapper.cpp \
	   ./drm-decoder/support/mer16-values.cpp \
	   ./drm-decoder/support/mer4-values.cpp \
	   ./drm-decoder/support/mer64-values.cpp \
	   ./drm-decoder/support/prbs.cpp \
	   ./drm-decoder/support/protlevels.cpp \
	   ./drm-decoder/support/qam16-metrics.cpp \
	   ./drm-decoder/support/qam4-metrics.cpp \
	   ./drm-decoder/support/qam64-metrics.cpp \
	   ./drm-decoder/support/viterbi-drm.cpp

unix {
exists ("./.git") {
   GITHASHSTRING = $$system(git rev-parse --short HEAD)
   !isEmpty(GITHASHSTRING) {
       message("Current git hash = $$GITHASHSTRING")
       DEFINES += GITHASH=\\\"$$GITHASHSTRING\\\"
   }
}
isEmpty(GITHASHSTRING) {
    DEFINES += GITHASH=\\\"------\\\"
}

DESTDIR		= ./linux-bin
CONFIG		+= sdrplay
DEFINES		+= HAVE_DRM_DECODER
DEFINES		+= ESTIMATOR_1
#CONFIG		+= faad
CONFIG		+= fdk-aac

LIBS		+= -L/usr/lib64
LIBS		+= -L/lib64
LIBS            += -lfaad_drm
INCLUDEPATH	+= /usr/include/qt5/qwt
LIBS		+= -lqwt-qt5 -lrt -lsndfile -lsamplerate -lportaudio -lusb-1.0 -lfftw3f -ldl
}

win32 {
exists ("./.git") {
   GITHASHSTRING = $$system(git rev-parse --short HEAD)
   !isEmpty(GITHASHSTRING) {
       message("Current git hash = $$GITHASHSTRING")
       DEFINES += GITHASH=\\\"$$GITHASHSTRING\\\"
   }
}
isEmpty(GITHASHSTRING) {
    DEFINES += GITHASH=\\\"------\\\"
}

DESTDIR		= /usr/shared/w32-programs/windows-drm2
CONFIG		+= sdrplay
CONFIG		+= hackrf
CONFIG		+= rtlsdr
# includes in mingw differ from the includes in fedora linux
INCLUDEPATH += /usr/i686-w64-mingw32/sys-root/mingw/include
INCLUDEPATH += /usr/i686-w64-mingw32/sys-root/mingw/include/qt5/qwt
INCLUDEPATH += /usr/local/include
LIBS    += -L/usr/i686-w64-mingw32/sys-root/mingw/lib
LIBS    += -lfftw3f
LIBS    += -lportaudio
LIBS    += -lqwt-qt5
#LIBS    += -lqwt
LIBS    += -lusb-1.0
LIBS    += -lsndfile
LIBS    += -lsamplerate
LIBS    += -lole32
#CONFIG		+= -lfaad_drm
CONFIG		+= fdk-aac
LIBS    += -lwinmm
}

#       the SDRplay
#
sdrplay {
        DEFINES         += HAVE_SDRPLAY
        FORMS           += ./devices/sdrplay-handler/sdrplay-widget.ui
        DEPENDPATH      += ./devices/sdrplay-handler
        INCLUDEPATH     += ./devices/sdrplay-handler
        HEADERS         += ./devices/sdrplay-handler/sdrplay-handler.h \
                           ./devices/sdrplay-handler/sdrplayselect.h
        SOURCES         += ./devices/sdrplay-handler/sdrplay-handler.cpp \
                           ./devices/sdrplay-handler/sdrplayselect.cpp
}

hackrf	{
	DEFINES		+= HAVE_HACKRF
        FORMS           += ./devices/hackrf-handler/hackrf-widget.ui
        DEPENDPATH	+= ./devices/hackrf-handler
        INCLUDEPATH	+= ./devices/hackrf-handler
        HEADERS         += ./devices/hackrf-handler/hackrf-handler.h 
        SOURCES         += ./devices/hackrf-handler/hackrf-handler.cpp 
}

rtlsdr	{
	DEFINES		+= HAVE_RTLSDR
        FORMS           += ./devices/rtlsdr-handler/rtlsdr-widget.ui
        DEPENDPATH	+= ./devices/rtlsdr-handler
        INCLUDEPATH	+= ./devices/rtlsdr-handler
        HEADERS         += ./devices/rtlsdr-handler/rtlsdr-handler.h  \
	                   ./devices/rtlsdr-handler/dongleselect.h
        SOURCES         += ./devices/rtlsdr-handler/rtlsdr-handler.cpp \
	                   ./devices/rtlsdr-handler/dongleselect.cpp
}

pmsdr	{
	DEFINES		+= HAVE_PMSDR
	TARGET		= swradio-pmsdr
	FORMS		+= ./devices/pmsdr-handler/pmsdr-widget.ui
	DEPENDPATH	+= ./devices/pmsdr-handler
        INCLUDEPATH     += ./devices/pmsdr-handler
        HEADERS         += ./devices/pmsdr-handler/pmsdr-handler.h \
			   ./devices/pmsdr-handler/pmsdr_comm.h \
	                   ./devices/pmsdr-handler/pmsdr_usb.h \
	                   ./devices/pmsdr-handler/si570-handler.h 
        SOURCES         += ./devices/pmsdr-handler/pmsdr-handler.cpp \
			   ./devices/pmsdr-handler/pmsdr_comm.cpp \
	                   ./devices/pmsdr-handler/pmsdr_usb.cpp \
	                   ./devices/pmsdr-handler/si570-handler.cpp 
	CONFIG		+= cardreader
}

extio	{
	DEFINES		+= HAVE_EXTIO
	TARGET		= swradio-extio
	FORMS		+= ./devices/extio-handler/extio-widget.ui
	DEPENDPATH	+= ./devices/extio-handler
        INCLUDEPATH     += ./devices/extio-handler
        HEADERS         += ./devices/extio-handler/extio-handler.h 
        SOURCES         += ./devices/extio-handler/extio-handler.cpp 
	CONFIG		+= cardreader
}

fdk-aac	{
DEFINES		+= __WITH_FDK_AAC__
unix {
LIBS		+= -lfdk-aac
}
win32 {
LIBS		+= -lfdk-aac-2
}
#LIBS		+= -lfdk-aac -larmadillo
INCLUDEPATH	+= /usr/local/include/fdk-aac
HEADERS		+= ./drm-decoder/data/aac-processor-fdk.h \
	           ./drm-decoder/data/xheaac-processor.h 
SOURCES		+= ./drm-decoder/data/aac-processor-fdk.cpp \
	           ./drm-decoder/data/xheaac-processor.cpp 
}

faad	{
DEFINES		+= __WITH_FAAD__
HEADERS		+=  ./drm-decoder/data/aac-processor-faad.h  \
#	            ./drm-decoder/data/drm-aacdecoder.h \
	            ./drm-decoder/data/neaacdec.h 
SOURCES		+= ./drm-decoder/data/aac-processor-faad.cpp  
#	           ./drm-decoder/data/drm-aacdecoder.cpp 
LIBS		+= -lfaad_drm
#LIBS		+= -lfaad_drm -larmadillo
}
